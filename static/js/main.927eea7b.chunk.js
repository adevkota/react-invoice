(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{132:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(66),c=n.n(i),o=n(3),l=n(4),u=n(7),s=n(5),d=n(6),m=(n(78),n(1)),p=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("address",{contentEditable:""},this.props.children)}}]),t}(a.Component),h=function(e){return r.a.createElement("td",null,e.children,r.a.createElement("input",{onChange:function(t){return e.update(e.name,t.target.value,e.index)},value:e.val,style:Object(m.a)({width:"100%"},e.style,{textAlign:"inherit"})}))},f=function(e){return r.a.createElement("table",{className:"balance"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Total ($)")),r.a.createElement("td",null,r.a.createElement("span",null,e.total))),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Amount Paid ($)")),r.a.createElement(h,{update:e.update,name:"amountPaid",val:e.amountPaid})),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Balance Due ($)")),r.a.createElement("td",null,r.a.createElement("span",null,e.amountDue)))))},E=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.item,n=this.props.index;return r.a.createElement("tr",null,r.a.createElement(h,{update:this.props.update,name:"name",index:n,val:t.name},r.a.createElement("button",{className:"cut",onClick:function(t){return e.props.delete(e.props.index)}},"-")),r.a.createElement(h,{update:this.props.update,name:"weekEnding",index:n,val:t.weekEnding}),r.a.createElement(h,{update:this.props.update,name:"rate",index:n,val:t.rate}),r.a.createElement(h,{update:this.props.update,name:"hours",index:n,val:t.hours}),r.a.createElement("td",null,r.a.createElement("span",null,t.rate*t.hours)))}}]),t}(a.Component),v=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.items;return r.a.createElement("table",{className:"inventory"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Consultant")),r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Week ending")),r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Rate($)")),r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Hours")),r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Price($)")))),r.a.createElement("tbody",null,t.map(function(t,n){return r.a.createElement(E,{update:e.props.update,delete:e.props.delete,key:n,index:n,item:t})})))}}]),t}(a.Component),b=n(36),g=function(e){var t=Object(a.useState)(e.hideDueDate),n=Object(b.a)(t,2),i=n[0],c=n[1];return Object(a.useEffect)(function(){c(e.hideDueDate)},[e.hideDueDate]),r.a.createElement("table",{className:"meta"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Invoice #")),r.a.createElement(h,{style:{width:"calc(100% - 50px)"},update:e.update,prefix:e.prefix,val:e.invoiceNum,name:"invoiceNum"},r.a.createElement("span",{className:"prefix",style:{height:"15px",lineHeight:"15px"},contentEditable:""},e.prefix?"".concat(e.prefix,"-"):""))),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Invoice Date")),r.a.createElement(h,{update:e.update,name:"invoiceDate",val:e.invoiceDate})),r.a.createElement("tr",{style:i?{display:"none"}:{}},r.a.createElement("th",null,r.a.createElement("button",{className:"cut",onClick:function(e){return c(!0)}},"-"),r.a.createElement("span",{contentEditable:""},"Due Date")),r.a.createElement(h,{style:{fontWeight:600},update:e.update,name:"dueDate",val:e.dueDate})),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Amount Due")),r.a.createElement("td",null,r.a.createElement("span",{className:"prefix",contentEditable:""},"$"),r.a.createElement("span",{style:{fontWeight:600}},e.amountDue)))))},y=function(e){var t=e.company;return r.a.createElement("header",null,r.a.createElement("h1",null,"Invoice"),r.a.createElement(p,null,r.a.createElement("p",{style:{fontWeight:600}},t.name),r.a.createElement("p",null,t.address1),r.a.createElement("p",null,"".concat(t.city,", ").concat(t.state," ").concat(t.zip))))},O=function(e){var t=e.terms,n=e.endClient;return r.a.createElement("aside",null,r.a.createElement("h1",null),r.a.createElement("div",{style:t?{fontSize:13,paddingBottom:"26px"}:{display:"none"},contentEditable:""},r.a.createElement("p",{style:{fontWeight:600,fontSize:13}},"Terms"),r.a.createElement("p",null,t)),r.a.createElement("div",{style:{fontSize:13},contentEditable:""},r.a.createElement("p",{style:{fontWeight:600,fontSize:13}},"Services Performed at:"),r.a.createElement("p",null,n.name),r.a.createElement("p",null,n.address1),r.a.createElement("p",null,n.city,", ",n.state," ",n.zip)))},j=n(21),D="articles.USER_FETCHED",w="articles.ITEM_ADD_REQUESTED",A="articles.ITEM_UPDATE_REQUESTED",k="articles.ITEM_DELETE_REQUESTED",I="articles.METADATA_UPDATE_REQUESTED";var C=n(54),x=n(16),N=n(24),S={invoiceNum:1,invoiceDate:"Jan 4, 2015",dueDate:"Jan 15, 2016",amountDue:0,total:0,items:[{name:"",weekEnding:"",rate:"",hours:""}],amountPaid:0,userInfo:{company:[{name:"Company Name",address1:"Address line 1",city:"city",state:"state",zip:"zip"}],clients:[{address1:"vendor street address",city:"city",consultants:[{}],endClients:[{name:"Client Name",address1:"Client Address 1",city:"City",state:"State",zip:"Zip"}],hideDueDate:!0,name:"vendor name",state:"state",terms:"",zip:"zip"}]}};function z(e){return e.invoice.userInfo.displayName}function P(e){return e.company&&e.company.length?e.company[0]:{}}function T(e){var t=e.clients,n=function(){return{}},a=function(e){var t=e[0];t.consultants,t.endClients;return Object(C.a)(t,["consultants","endClients"])};return t&&t.length?a(t):n()}function W(e){var t=e.clients,n=function(){return{}},a=function(e){var t=e[0].endClients;return t&&t.length?t[0]:{}};return t&&t.length?a(t):n()}function U(e){var t=e.clients[0].consultants,n=function(){return[{name:"",weekEnding:"",rate:"",hours:""}]},a=function(e){return e.map(function(e){return{name:e.name||"",rate:e.rate||"",hours:e.defaultHours||"",weekEnding:""}})};return t?a(t):n(t)}function M(e){return e.reduce(function(e,t){return e+t.rate*t.hours},0)}var R,_,B,H=Object(j.b)(function(e){return Object(m.a)({},function(e){var t=e.invoice,n=t.userInfo,a=Object(C.a)(t,["userInfo"]);return Object(m.a)({},a,{company:P(n),client:T(n),endClient:W(n)})}(e))},function(e){return{addItem:function(t){e(function(e){return function(t){return t({type:w,item:e})}}(t))},updateItem:function(t,n,a){e(function(e,t,n){return function(a){return a({type:A,key:e,val:t,index:n})}}(t,n,a))},deleteItem:function(t){e(function(e){return function(t){return t({type:k,index:e})}}(t))},updateMetadata:function(t,n){e(function(e,t){return function(n){return n({type:I,key:e,val:t})}}(t,n))}}})(function(e){var t=e.client,n=t.name?t.name.split(" ").reduce(function(e,t){return"".concat(e).concat(t?t[0]:"")},""):"";return r.a.createElement("div",{id:"invoice-wrapper"},r.a.createElement(y,{company:e.company}),r.a.createElement("article",null,r.a.createElement(p,null,r.a.createElement("p",{style:{fontSize:11}},"Bill To:"),r.a.createElement("p",{style:{fontSize:13,fontWeight:600}},t.name),r.a.createElement("p",{style:{fontSize:14,fontWeight:400}},t.address1),r.a.createElement("p",{style:{fontSize:14,fontWeight:400}},"".concat(t.city,", ").concat(t.state," ").concat(t.zip))),r.a.createElement(g,{invoiceNum:e.invoiceNum,invoiceDate:e.invoiceDate,amountDue:e.amountDue,dueDate:e.dueDate,prefix:n,hideDueDate:t.hideDueDate,update:e.updateMetadata}),r.a.createElement(v,{items:e.items,update:e.updateItem,delete:e.deleteItem}),r.a.createElement("button",{className:"add",onClick:e.addItem},"+"),r.a.createElement(f,{total:e.total,amountPaid:e.amountPaid,amountDue:e.amountDue,update:e.updateMetadata})),r.a.createElement(O,{endClient:e.endClient,terms:t.terms}))}),$=n(8),L=n(55),J=n.n(L),Q=n(68),F=n(85),q=function(){return B},K=function(){return Promise.all([n.e(4).then(n.bind(null,137)),n.e(3).then(n.t.bind(null,138,7))]).then(function(e){var t=Object(b.a)(e,2);t[0],t[1];F.initializeApp({apiKey:"AIzaSyAiqxhHbuMn3H0HmBR-BdDWckuCbX77o-w",authDomain:"invoice-aa086.firebaseapp.com",databaseURL:"https://invoice-aa086.firebaseio.com",projectId:"invoice-aa086",storageBucket:"invoice-aa086.appspot.com",messagingSenderId:"1090928850629"}),R=F.firestore(),B=F.auth()})},X=function(){var e=Object(Q.a)(J.a.mark(function e(t){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=4;break}return e.next=3,R.collection("users").doc(t).get();case 3:_=e.sent;case 4:return e.abrupt("return",_);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Z=(n(132),"authentication.loggedOut"),G="authentication.loggedIn";var V={isAuthenticated:!1};function Y(e){return e.authentication.isAuthenticated}var ee=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={email:"",password:""},n.toggleAuth=n.toggleAuth.bind(Object($.a)(n)),n.updateAuthInfo=n.updateAuthInfo.bind(Object($.a)(n)),n.renderAuthenticated=n.renderAuthenticated.bind(Object($.a)(n)),n.renderNotAuthenticated=n.renderNotAuthenticated.bind(Object($.a)(n)),n.renderUnknownAuthentication=n.renderUnknownAuthentication.bind(Object($.a)(n)),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;q().onAuthStateChanged(function(t){t?X(t.uid).then(function(t){var n=t.exists?t.data():null;e.props.loggedIn(),e.props.userFetched(n)}):e.props.loggedOut()})}},{key:"render",value:function(){return!0===this.props.isAuthenticated?this.renderAuthenticated():!1===this.props.isAuthenticated?this.renderNotAuthenticated():this.renderUnknownAuthentication()}},{key:"renderAuthenticated",value:function(){return r.a.createElement("div",{className:"Control"},r.a.createElement("span",{className:"greeting"},"  Hello ",this.props.displayName," "),r.a.createElement("button",{onClick:this.toggleAuth},"Logout"))}},{key:"renderNotAuthenticated",value:function(){var e=this;return r.a.createElement("div",{className:"Control"},r.a.createElement("input",{name:"email",value:this.state.email,placeholder:"Email",onChange:function(t){return e.updateAuthInfo(t.target.name,t.target.value)}}),r.a.createElement("input",{name:"password",type:"password",value:this.state.password,placeholder:"Password",onChange:function(t){return e.updateAuthInfo(t.target.name,t.target.value)}}),r.a.createElement("button",{onClick:this.toggleAuth},"Login"))}},{key:"renderUnknownAuthentication",value:function(){return r.a.createElement("div",{className:"Control"},r.a.createElement("span",null,"  hello "))}},{key:"toggleAuth",value:function(){var e,t;q().currentUser||localStorage.getItem("me.adevkota.react-invoice")?q().signOut().then(function(){_=void 0}).catch(function(e){console.log(e)}):(e=this.state.email,t=this.state.password,q().signInWithEmailAndPassword(e,t).catch(function(e){console.log(e)}))}},{key:"updateAuthInfo",value:function(e,t){this.setState(Object(x.a)({},e,t))}}]),t}(a.Component);var te=Object(j.b)(function(e){return{displayName:z(e),isAuthenticated:Y(e)}},function(e){return{loggedIn:function(){e(function(e){e({type:G})})},loggedOut:function(){e(function(e){e({type:Z})})},userFetched:function(t){e(function(e){return function(t){t({type:D,userInfo:e})}}(t))}}})(ee),ne=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={},K().then(function(){n.setState({firebaseInitialized:!0})}),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.state.firebaseInitialized?r.a.createElement("div",null,r.a.createElement(te,null),r.a.createElement(H,null)):null}}]),t}(a.Component),ae=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function re(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(133);var ie=n(22),ce=n(69),oe=Object(ie.d)(Object(ie.c)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;switch((arguments.length>1?arguments[1]:void 0).type){case G:return Object(m.a)({},e,{isAuthenticated:!0});case Z:return{isAuthenticated:!1};default:return e}},invoice:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case D:return e=M(t=Object(N.a)(U(a.userInfo))),Object(m.a)({},n,{items:t,total:e,amountDue:e-n.amountPaid,userInfo:a.userInfo});case w:return e=M(t=[].concat(Object(N.a)(n.items),Object(N.a)(U(n.userInfo)))),Object(m.a)({},n,{items:t,total:e,amountDue:e-n.amountPaid});case A:return e=M(t=n.items.map(function(e,t){return t!==a.index?e:Object(m.a)({},e,Object(x.a)({},a.key,a.val))})),Object(m.a)({},n,{items:t,total:e,amountDue:e-n.amountPaid});case k:return e=M(t=[].concat(Object(N.a)(n.items.slice(0,a.index)),Object(N.a)(n.items.slice(a.index+1)))),Object(m.a)({},n,{items:t,total:e,amountDue:e-n.amountPaid});case I:return"amountPaid"===a.key?Object(m.a)({},n,{amountPaid:a.val,amountDue:n.total-a.val}):Object(m.a)({},n,Object(x.a)({},a.key,a.val));default:return n}}}),Object(ie.a)(ce.a));c.a.render(r.a.createElement(j.a,{store:oe},r.a.createElement(ne,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/react-invoice",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/react-invoice","/service-worker.js");ae?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):re(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):re(e)})}}()},73:function(e,t,n){e.exports=n(134)},78:function(e,t,n){}},[[73,1,2]]]);
//# sourceMappingURL=main.927eea7b.chunk.js.map