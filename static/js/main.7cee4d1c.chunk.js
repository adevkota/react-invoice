(this["webpackJsonpreact-invoice"]=this["webpackJsonpreact-invoice"]||[]).push([[0],{132:function(e,t,n){},133:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(66),i=n.n(c),o=n(31),u=n(32),l=n(36),s=n(33),d=n(35),m=(n(79),n(2)),p=n(67),f=n.n(p),h=function(e){var t=e.children,n=e.address;return r.a.createElement("address",{className:f.a.Address,contentEditable:""},t,r.a.createElement("p",{style:{fontWeight:600}},n.name),r.a.createElement("p",null,n.address1),r.a.createElement("p",null,"".concat(n.city,", ").concat(n.state," ").concat(n.zip)))},E=n(10);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){var t=e.type,n=Object(E.a)(e,["type"]);return r.a.createElement("td",null,n.children,r.a.createElement("input",{onChange:function(e){return n.update(n.name,e.target.value,n.index)},value:n.val,type:t||"text",style:v({width:"100%"},n.style,{textAlign:"inherit"})}))},g=function(e){return r.a.createElement("table",{className:"balance"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Total ($)")),r.a.createElement("td",null,r.a.createElement("span",null,e.total))),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Amount Paid ($)")),r.a.createElement(y,{update:e.update,name:"amountPaid",val:e.amountPaid})),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Balance Due ($)")),r.a.createElement("td",null,r.a.createElement("span",null,e.amountDue)))))},O=function(e){var t=e.item,n=e.index,a=e.update,c=Object(E.a)(e,["item","index","update"]);return r.a.createElement("tr",null,r.a.createElement(y,{update:a,name:"name",index:n,val:t.name},r.a.createElement("button",{className:"cut",onClick:function(e){return c.delete(n)}},"-")),r.a.createElement(y,{update:a,name:"weekEnding",index:n,type:"date",val:t.weekEnding}),r.a.createElement(y,{update:a,name:"rate",index:n,val:t.rate}),r.a.createElement(y,{update:a,name:"hours",index:n,val:t.hours}),r.a.createElement("td",null,r.a.createElement("span",null,t.rate*t.hours)))},j=function(e){return r.a.createElement("table",{className:"inventory"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Consultant")),r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Week ending")),r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Rate($)")),r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Hours")),r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Price($)")))),r.a.createElement("tbody",null,e.items.map((function(t,n){return r.a.createElement(O,{update:e.update,delete:e.delete,key:n,index:n,item:t})}))))},w=n(34),D=function(e){var t=Object(a.useState)(e.hideDueDate),n=Object(w.a)(t,2),c=n[0],i=n[1];return Object(a.useEffect)((function(){i(e.hideDueDate)}),[e.hideDueDate]),r.a.createElement("table",{className:"meta"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Invoice #")),r.a.createElement(y,{style:{width:"calc(100% - 50px)"},update:e.update,prefix:e.prefix,val:e.invoiceNum,name:"invoiceNum"},r.a.createElement("span",{className:"prefix",style:{height:"15px",lineHeight:"15px"},contentEditable:""},e.prefix?"".concat(e.prefix,"-"):""))),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Invoice Date")),r.a.createElement(y,{update:e.update,type:"date",name:"invoiceDate",val:e.invoiceDate})),r.a.createElement("tr",{style:c?{display:"none"}:{}},r.a.createElement("th",null,r.a.createElement("button",{className:"cut",onClick:function(e){return i(!0)}},"-"),r.a.createElement("span",{contentEditable:""},"Due Date")),r.a.createElement(y,{style:{fontWeight:600},type:"date",update:e.update,name:"dueDate",val:e.dueDate})),r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement("span",{contentEditable:""},"Amount Due")),r.a.createElement("td",null,r.a.createElement("span",{className:"prefix",contentEditable:""},"$"),r.a.createElement("span",{style:{fontWeight:600}},e.amountDue)))))},P=n(37),A=n.n(P),k=function(e){var t=e.company;return r.a.createElement("header",{className:A.a.InvoiceHeader},r.a.createElement("h1",{className:A.a.address},"Invoice"),r.a.createElement(h,{className:A.a.address,address:t}))},I=function(e){var t=e.terms,n=e.endClient;return r.a.createElement("aside",null,r.a.createElement("h1",null),r.a.createElement("div",{style:t?{fontSize:13,paddingBottom:"26px"}:{display:"none"},contentEditable:""},r.a.createElement("p",{style:{fontWeight:600,fontSize:13}},"Terms"),r.a.createElement("p",null,t)),r.a.createElement("div",{style:{fontSize:13},contentEditable:""},r.a.createElement("p",{style:{fontWeight:600,fontSize:13}},"Services Performed at:"),r.a.createElement(h,{address:n})))},x=n(15),C="articles.USER_FETCHED",N="articles.ITEM_ADD_REQUESTED",S="articles.ITEM_UPDATE_REQUESTED",_="articles.ITEM_DELETE_REQUESTED",T="articles.METADATA_UPDATE_REQUESTED";var z=n(18);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W={invoiceNum:1,invoiceDate:"2019-11-30",dueDate:"2020-01-30",amountDue:0,total:0,items:[{name:"",weekEnding:"",rate:"",hours:""}],amountPaid:0,userInfo:{company:[{name:"Company Name",address1:"Address line 1",city:"city",state:"state",zip:"zip"}],clients:[{address1:"vendor street address",city:"city",consultants:[{}],endClients:[{name:"Client Name",address1:"Client Address 1",city:"City",state:"State",zip:"Zip"}],hideDueDate:!0,name:"vendor name",state:"state",terms:"",zip:"zip"}]}};function R(e){return e.invoice.userInfo.displayName}function M(e){return e.company&&e.company.length?e.company[0]:{}}function B(e){var t=e.clients,n=function(){return{}},a=function(e){var t=e[0];t.consultants,t.endClients;return Object(E.a)(t,["consultants","endClients"])};return t&&t.length?a(t):n()}function $(e){var t=e.clients,n=function(){return{}},a=function(e){var t=e[0].endClients;return t&&t.length?t[0]:{}};return t&&t.length?a(t):n()}function L(e){var t=e.clients[0].consultants,n=function(){return[{name:"",weekEnding:"",rate:"",hours:""}]},a=function(e){return e.map((function(e){return{name:e.name||"",rate:e.rate||"",hours:e.defaultHours||"",weekEnding:""}}))};return t?a(t):n(t)}function Q(e){return e.reduce((function(e,t){return e+t.rate*t.hours}),0)}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var J,q,K,X=Object(x.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},function(e){var t=e.invoice,n=t.userInfo;return H({},Object(E.a)(t,["userInfo"]),{company:M(n),client:B(n),endClient:$(n)})}(e))}),(function(e){return{addItem:function(t){e(function(e){return function(t){return t({type:N,item:e})}}(t))},updateItem:function(t,n,a){e(function(e,t,n){return function(a){return a({type:S,key:e,val:t,index:n})}}(t,n,a))},deleteItem:function(t){e(function(e){return function(t){return t({type:_,index:e})}}(t))},updateMetadata:function(t,n){e(function(e,t){return function(n){return n({type:T,key:e,val:t})}}(t,n))}}}))((function(e){var t=e.client,n=t.name?t.name.split(" ").reduce((function(e,t){return"".concat(e).concat(t?t[0]:"")}),""):"";return r.a.createElement("div",{id:"invoice-wrapper"},r.a.createElement(k,{company:e.company}),r.a.createElement("article",null,r.a.createElement(h,{address:e.client}),r.a.createElement(D,{invoiceNum:e.invoiceNum,invoiceDate:e.invoiceDate,amountDue:e.amountDue,dueDate:e.dueDate,prefix:n,hideDueDate:t.hideDueDate,update:e.updateMetadata}),r.a.createElement(j,{items:e.items,update:e.updateItem,delete:e.deleteItem}),r.a.createElement("button",{className:"add",onClick:e.addItem},"+"),r.a.createElement(g,{total:e.total,amountPaid:e.amountPaid,amountDue:e.amountDue,update:e.updateMetadata})),r.a.createElement(I,{endClient:e.endClient,terms:t.terms}))})),Z=n(5),G=n(55),V=n.n(G),Y=n(69),ee=n(85),te=function(){return K},ne=function(){return Promise.all([n.e(4).then(n.bind(null,136)),n.e(3).then(n.t.bind(null,137,7))]).then((function(e){var t=Object(w.a)(e,2);t[0],t[1];ee.initializeApp({apiKey:"AIzaSyAiqxhHbuMn3H0HmBR-BdDWckuCbX77o-w",authDomain:"invoice-aa086.firebaseapp.com",databaseURL:"https://invoice-aa086.firebaseio.com",projectId:"invoice-aa086",storageBucket:"invoice-aa086.appspot.com",messagingSenderId:"1090928850629"}),J=ee.firestore(),K=ee.auth()}))},ae=function(){var e=Object(Y.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q){e.next=4;break}return e.next=3,J.collection("users").doc(t).get();case 3:q=e.sent;case 4:return e.abrupt("return",q);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=n(25),ce=n.n(re),ie="authentication.loggedOut",oe="authentication.loggedIn";function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){Object(m.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se={isAuthenticated:!1};function de(e){return e.authentication.isAuthenticated}var me=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={email:"",password:""},n.toggleAuth=n.toggleAuth.bind(Object(Z.a)(n)),n.updateAuthInfo=n.updateAuthInfo.bind(Object(Z.a)(n)),n.renderAuthenticated=n.renderAuthenticated.bind(Object(Z.a)(n)),n.renderNotAuthenticated=n.renderNotAuthenticated.bind(Object(Z.a)(n)),n.renderUnknownAuthentication=n.renderUnknownAuthentication.bind(Object(Z.a)(n)),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;te().onAuthStateChanged((function(t){t?ae(t.uid).then((function(t){var n=t.exists?t.data():null;e.props.loggedIn(),e.props.userFetched(n)})):e.props.loggedOut()}))}},{key:"render",value:function(){return!0===this.props.isAuthenticated?this.renderAuthenticated():!1===this.props.isAuthenticated?this.renderNotAuthenticated():this.renderUnknownAuthentication()}},{key:"renderAuthenticated",value:function(){return r.a.createElement("div",{className:ce.a.Control+" d-screen-only"},r.a.createElement("span",{className:ce.a.greeting},"  Hello ",this.props.displayName," "),r.a.createElement("button",{onClick:this.toggleAuth},"Logout"))}},{key:"renderNotAuthenticated",value:function(){var e=this;return r.a.createElement("div",{className:ce.a.Control+" d-screen-only"},r.a.createElement("input",{name:"email",value:this.state.email,placeholder:"Email",onChange:function(t){return e.updateAuthInfo(t.target.name,t.target.value)}}),r.a.createElement("input",{name:"password",type:"password",value:this.state.password,placeholder:"Password",onChange:function(t){return e.updateAuthInfo(t.target.name,t.target.value)}}),r.a.createElement("button",{onClick:this.toggleAuth},"Login"))}},{key:"renderUnknownAuthentication",value:function(){return r.a.createElement("div",{className:ce.a.Control+" d-screen-only"},r.a.createElement("span",null,"  hello "))}},{key:"toggleAuth",value:function(){var e,t;te().currentUser||localStorage.getItem("me.adevkota.react-invoice")?te().signOut().then((function(){q=void 0})).catch((function(e){console.log(e)})):(e=this.state.email,t=this.state.password,te().signInWithEmailAndPassword(e,t).catch((function(e){console.log(e)})))}},{key:"updateAuthInfo",value:function(e,t){console.log(e),this.setState(Object(m.a)({},e,t))}}]),t}(a.Component);var pe=Object(x.b)((function(e){return{displayName:R(e),isAuthenticated:de(e)}}),(function(e){return{loggedIn:function(){e((function(e){e({type:oe})}))},loggedOut:function(){e((function(e){e({type:ie})}))},userFetched:function(t){e(function(e){return function(t){t({type:C,userInfo:e})}}(t))}}}))(me),fe=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(s.a)(t).call(this,e))).state={},ne().then((function(){n.setState({firebaseInitialized:!0})})),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.state.firebaseInitialized?r.a.createElement("div",null,r.a.createElement(pe,null),r.a.createElement(X,null)):null}}]),t}(a.Component),he=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ee(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(132);var be=n(16),ve=n(70),ye=Object(be.d)(Object(be.c)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return le({},e,{isAuthenticated:!0});case ie:return{isAuthenticated:!1};default:return e}},invoice:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case C:return H({},n,{items:t=Object(z.a)(L(a.userInfo)),total:e=Q(t),amountDue:e-n.amountPaid,userInfo:a.userInfo});case N:return H({},n,{items:t=[].concat(Object(z.a)(n.items),Object(z.a)(L(n.userInfo))),total:e=Q(t),amountDue:e-n.amountPaid});case S:return t=n.items.map((function(e,t){return t!==a.index?e:H({},e,Object(m.a)({},a.key,a.val))})),H({},n,{items:t,total:e=Q(t),amountDue:e-n.amountPaid});case _:return t=[].concat(Object(z.a)(n.items.slice(0,a.index)),Object(z.a)(n.items.slice(a.index+1))),H({},n,{items:t,total:e=Q(t),amountDue:e-n.amountPaid});case T:return"amountPaid"===a.key?H({},n,{amountPaid:a.val,amountDue:n.total-a.val}):H({},n,Object(m.a)({},a.key,a.val));default:return n}}}),Object(be.a)(ve.a));i.a.render(r.a.createElement(x.a,{store:ye},r.a.createElement(fe,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/react-invoice",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/react-invoice","/service-worker.js");he?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ee(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):Ee(e)}))}}()},25:function(e,t,n){e.exports={Control:"Control_Control__73wyo",greeting:"Control_greeting__3tdRB"}},37:function(e,t,n){e.exports={InvoiceHeader:"Header_InvoiceHeader__v0wTj"}},67:function(e,t,n){e.exports={Address:"Address_Address__2wD14"}},74:function(e,t,n){e.exports=n(133)},79:function(e,t,n){}},[[74,1,2]]]);
//# sourceMappingURL=main.7cee4d1c.chunk.js.map