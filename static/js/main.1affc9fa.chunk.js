(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){"use strict";n.r(t);var a,i,r,c=n(0),s=n.n(c),l=n(56),o=n.n(l),u=n(1),d=n(2),m=n(4),h=n(3),p=n(5),f=(n(67),function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return s.a.createElement("address",{contentEditable:""},this.props.children)}}]),t}(c.Component)),b=n(44),E=n.n(b),v=n(57),j=n(58),O=n(70),y=function(){return r},g=function(){return Promise.all([n.e(4).then(n.bind(null,122)),n.e(3).then(n.t.bind(null,123,7))]).then(function(e){var t=Object(j.a)(e,2);t[0],t[1];O.initializeApp({apiKey:"AIzaSyAiqxhHbuMn3H0HmBR-BdDWckuCbX77o-w",authDomain:"invoice-aa086.firebaseapp.com",databaseURL:"https://invoice-aa086.firebaseio.com",projectId:"invoice-aa086",storageBucket:"invoice-aa086.appspot.com",messagingSenderId:"1090928850629"}),a=O.firestore(),r=O.auth()})},k=function(){var e=Object(v.a)(E.a.mark(function e(t){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=4;break}return e.next=3,a.collection("users").doc(t).get();case 3:i=e.sent;case 4:return e.abrupt("return",i);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),D=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(m.a)(this,Object(h.a)(t).call(this))).state={company:{name:"Two Way Binding Inc",address1:"Address line 1",city:"city",state:"state",zip:"zip"}},e}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;y().onAuthStateChanged(function(t){t?k(t.uid).then(function(t){e.setState({company:t.exists?t.data().company[0]:null})}):e.setState({company:{name:"Two Way Binding Inc",address1:"Address line 1",city:"city",state:"state",zip:"zip"}})})}},{key:"render",value:function(){return s.a.createElement("header",null,s.a.createElement("h1",null,"Invoice"),s.a.createElement(f,null,s.a.createElement("p",{style:{fontWeight:600}},this.state.company.name),s.a.createElement("p",null,this.state.company.address1),s.a.createElement("p",null,"".concat(this.state.company.city,", ").concat(this.state.company.state," ").concat(this.state.company.zip))))}}]),t}(c.Component),I=n(11),w=n(8),C=n(45),A=n(6),S=function(e){return s.a.createElement("td",null,e.children,s.a.createElement("input",{onChange:function(t){return e.update(e.name,t.target.value,e.index)},value:e.val,style:Object(w.a)({width:"100%"},e.style,{textAlign:"inherit"})}))},x=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return s.a.createElement("table",{className:"balance"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement("span",{contentEditable:""},"Total ($)")),s.a.createElement("td",null,s.a.createElement("span",null,this.props.total))),s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement("span",{contentEditable:""},"Amount Paid ($)")),s.a.createElement(S,{update:this.props.update,name:"amountPaid",val:this.props.amountPaid})),s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement("span",{contentEditable:""},"Balance Due ($)")),s.a.createElement("td",null,s.a.createElement("span",null,this.props.amountDue)))))}}]),t}(c.Component),N=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.item,n=this.props.index;return s.a.createElement("tr",null,s.a.createElement(S,{update:this.props.update,name:"name",index:n,val:t.name},s.a.createElement("button",{className:"cut",onClick:function(t){return e.props.delete(e.props.index)}},"-")),s.a.createElement(S,{update:this.props.update,name:"weekEnding",index:n,val:t.weekEnding}),s.a.createElement(S,{update:this.props.update,name:"rate",index:n,val:t.rate}),s.a.createElement(S,{update:this.props.update,name:"hours",index:n,val:t.hours}),s.a.createElement("td",null,s.a.createElement("span",null,t.rate*t.hours)))}}]),t}(c.Component),z=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.items;return s.a.createElement("table",{className:"inventory"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement("span",{contentEditable:""},"Consultant")),s.a.createElement("th",null,s.a.createElement("span",{contentEditable:""},"Week ending")),s.a.createElement("th",null,s.a.createElement("span",{contentEditable:""},"Rate($)")),s.a.createElement("th",null,s.a.createElement("span",{contentEditable:""},"Hours")),s.a.createElement("th",null,s.a.createElement("span",{contentEditable:""},"Price($)")))),s.a.createElement("tbody",null,t.map(function(t,n){return s.a.createElement(N,{update:e.props.update,delete:e.props.delete,key:n,index:n,item:t})})))}}]),t}(c.Component),W=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={hideDueDate:e.hideDueDate},n.hideDueDate=n.hideDueDate.bind(Object(A.a)(n)),n}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.hideDueDate!==this.props.hideDueDate&&this.setState({hideDueDate:e.hideDueDate})}},{key:"hideDueDate",value:function(){this.setState({hideDueDate:!0})}},{key:"render",value:function(){var e=this;return s.a.createElement("table",{className:"meta"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement("span",{contentEditable:""},"Invoice #")),s.a.createElement(S,{style:{width:"calc(100% - 50px)"},update:this.props.update,prefix:this.props.prefix,val:this.props.invoiceNum,name:"invoiceNum"},s.a.createElement("span",{className:"prefix",style:{height:"15px",lineHeight:"15px"},contentEditable:""},this.props.prefix?"".concat(this.props.prefix,"-"):""))),s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement("span",{contentEditable:""},"Invoice Date")),s.a.createElement(S,{update:this.props.update,name:"invoiceDate",val:this.props.invoiceDate})),s.a.createElement("tr",{style:this.state.hideDueDate?{display:"none"}:{}},s.a.createElement("th",null,s.a.createElement("button",{className:"cut",onClick:function(t){return e.hideDueDate(t)}},"-"),s.a.createElement("span",{contentEditable:""},"Due Date")),s.a.createElement(S,{style:{fontWeight:600},update:this.props.update,name:"dueDate",val:this.props.dueDate})),s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement("span",{contentEditable:""},"Amount Due")),s.a.createElement("td",null,s.a.createElement("span",{className:"prefix",contentEditable:""},"$"),s.a.createElement("span",{style:{fontWeight:600}},this.props.amountDue)))))}}]),t}(c.Component),P=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={invoiceNum:1,invoiceDate:"Jan 4, 2015",dueDate:"Jan 15, 2016",amountDue:0,total:0,items:[{name:"",weekEnding:"",rate:"",hours:""}],amountPaid:0,userInfo:{clients:[{}]}},n.update=n.update.bind(Object(A.a)(n)),n.addItems=n.addItems.bind(Object(A.a)(n)),n.updateItems=n.updateItems.bind(Object(A.a)(n)),n.deleteItem=n.deleteItem.bind(Object(A.a)(n)),n.getInvoiceItemsFromConsultants=n.getInvoiceItemsFromConsultants.bind(Object(A.a)(n)),n.updatedTotals=n.updatedTotals.bind(Object(A.a)(n)),n}return Object(p.a)(t,e),Object(d.a)(t,[{key:"addItems",value:function(){var e=[].concat(Object(C.a)(this.state.items),Object(C.a)(this.getInvoiceItemsFromConsultants(this.state.userInfo.clients[0].consultants)));this.setState(Object(w.a)({items:e},this.updatedTotals(e,this.state.amountPaid)))}},{key:"componentDidMount",value:function(){var e=this;y().onAuthStateChanged(function(t){t?k(t.uid).then(function(t){var n=t.exists?t.data():null,a=e.getInvoiceItemsFromConsultants(n.clients?n.clients[0].consultants:null),i=e.updatedTotals(a,e.state.amountPaid);e.setState(Object(w.a)({userInfo:n,items:a},i))}):e.setState({userInfo:{clients:[{address1:"Vendor address",name:"Vendor Name",city:"City",state:"State",zip:"zip"}]}})})}},{key:"deleteItem",value:function(e){var t=Object.assign({},this.state);t.items=t.items.slice(),t.items[e]=Object.assign({},t.items[e]),t.items.splice(e,1),t=Object(w.a)({},t,this.updatedTotals(t.items,t.amountPaid)),this.setState(t)}},{key:"getInvoiceItemsFromConsultants",value:function(e){var t=function(){return[{name:"",weekEnding:"",rate:"",hours:""}]},n=function(e){return e.map(function(e){return{name:e.name||"",rate:e.rate||"",hours:e.defaultHours||"",weekEnding:""}})};return e?n(e):t(e)}},{key:"updateItems",value:function(e,t,n){var a=Object.assign({},this.state);a.items=a.items.slice(),a.items[n]=Object.assign({},a.items[n]),a.items[n][e]=t,"hours"!==e&&"rate"!==e||(a=Object(w.a)({},a,this.updatedTotals(a.items,a.amountPaid))),this.setState(a)}},{key:"updatedTotals",value:function(e,t){var n=e.reduce(function(e,t){return e+t.rate*t.hours},0);return{total:n,amountDue:n-t}}},{key:"update",value:function(e,t){var n;"amountPaid"===e?this.setState((n={},Object(I.a)(n,e,t),Object(I.a)(n,"amountDue",this.state.total-t),n)):this.setState(Object(I.a)({},e,t))}},{key:"render",value:function(){var e=this.state.userInfo.clients[0],t=e.name?e.name.split(" ").reduce(function(e,t){return"".concat(e).concat(t?t[0]:"")},""):"";return s.a.createElement("article",null,s.a.createElement(f,null,s.a.createElement("p",{style:{fontSize:11}},"Bill To:"),s.a.createElement("p",{style:{fontSize:13,fontWeight:600}},e.name),s.a.createElement("p",{style:{fontSize:14,fontWeight:400}},e.address1),s.a.createElement("p",{style:{fontSize:14,fontWeight:400}},"".concat(e.city,", ").concat(e.state," ").concat(e.zip))),s.a.createElement(W,Object.assign({},this.state,{prefix:t,hideDueDate:e.hideDueDate,update:this.update})),s.a.createElement(z,{items:this.state.items,update:this.updateItems,delete:this.deleteItem}),s.a.createElement("button",{className:"add",onClick:this.addItems},"+"),s.a.createElement(x,Object.assign({},this.state,{update:this.update})))}}]),t}(c.Component),T={endClient:{name:"Client Name",address1:"Client Address 1",city:"City",state:"State",zip:"Zip"},terms:void 0},B=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state=Object(w.a)({},T),n}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;y().onAuthStateChanged(function(t){t?k(t.uid).then(function(t){var n=Object(w.a)({},T);if(t.exists){var a=t.data().clients[0];n.endClient=a.endClients?a.endClients[0]:n.endClient,n.terms=a.terms}e.setState(n)}):e.setState(T)})}},{key:"render",value:function(){return s.a.createElement("aside",null,s.a.createElement("h1",null),s.a.createElement("div",{style:this.state.terms?{fontSize:13,paddingBottom:"26px"}:{display:"none"},contentEditable:""},s.a.createElement("p",{style:{fontWeight:600,fontSize:13}},"Terms"),s.a.createElement("p",null,this.state.terms)),s.a.createElement("div",{style:{fontSize:13},contentEditable:""},s.a.createElement("p",{style:{fontWeight:600,fontSize:13}},"Services Performed at:"),s.a.createElement("p",null,this.state.endClient.name),s.a.createElement("p",null,this.state.endClient.address1),s.a.createElement("p",null,this.state.endClient.city,", ",this.state.endClient.state," ",this.state.endClient.zip)))}}]),t}(c.Component),U=(n(117),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={authenticated:void 0,email:"",password:"",userInfo:null},n.toggleAuth=n.toggleAuth.bind(Object(A.a)(n)),n.updateAuthInfo=n.updateAuthInfo.bind(Object(A.a)(n)),n.renderAuthenticated=n.renderAuthenticated.bind(Object(A.a)(n)),n.renderNotAuthenticated=n.renderNotAuthenticated.bind(Object(A.a)(n)),n.renderUnknownAuthentication=n.renderUnknownAuthentication.bind(Object(A.a)(n)),n}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;y().onAuthStateChanged(function(t){t?k(t.uid).then(function(t){e.setState({authenticated:!0,userInfo:t.exists?t.data():null})}):e.setState({authenticated:!1,userInfo:null})})}},{key:"render",value:function(){return!0===this.state.authenticated?this.renderAuthenticated():!1===this.state.authenticated?this.renderNotAuthenticated():this.renderUnknownAuthentication()}},{key:"renderAuthenticated",value:function(){return s.a.createElement("div",{className:"Control"},s.a.createElement("span",null,"  hello ",this.state.userInfo&&this.state.userInfo.displayName," "),s.a.createElement("button",{onClick:this.toggleAuth},"Logout"))}},{key:"renderNotAuthenticated",value:function(){var e=this;return s.a.createElement("div",{className:"Control"},s.a.createElement("span",null,"  hello "),s.a.createElement("input",{name:"email",value:this.state.email,onChange:function(t){return e.updateAuthInfo(t.target.name,t.target.value)}}),s.a.createElement("input",{name:"password",type:"password",value:this.state.password,onChange:function(t){return e.updateAuthInfo(t.target.name,t.target.value)}}),s.a.createElement("button",{onClick:this.toggleAuth},"Login"))}},{key:"renderUnknownAuthentication",value:function(){return s.a.createElement("div",{className:"Control"},s.a.createElement("span",null,"  hello "))}},{key:"toggleAuth",value:function(){var e,t;y().currentUser||localStorage.getItem("me.adevkota.react-invoice")?y().signOut().then(function(){i=void 0}).catch(function(e){console.log(e)}):(e=this.state.email,t=this.state.password,y().signInWithEmailAndPassword(e,t).catch(function(e){console.log(e)}))}},{key:"updateAuthInfo",value:function(e,t){this.setState(Object(I.a)({},e,t))}}]),t}(c.Component)),$=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},g().then(function(){n.setState({firebaseInitialized:!0})}),n}return Object(p.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return this.state.firebaseInitialized?s.a.createElement("div",null,s.a.createElement(U,null),s.a.createElement("div",{id:"invoice-wrapper"},s.a.createElement(D,null),s.a.createElement(P,null),s.a.createElement(B,null))):null}}]),t}(c.Component),H=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function F(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(118);o.a.render(s.a.createElement($,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/react-invoice",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/react-invoice","/service-worker.js");H?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):F(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):F(e)})}}()},62:function(e,t,n){e.exports=n(119)},67:function(e,t,n){}},[[62,1,2]]]);
//# sourceMappingURL=main.1affc9fa.chunk.js.map